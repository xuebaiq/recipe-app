# 🍳 每日菜谱推荐系统

专为妈妈设计的智能菜谱推荐系统，结合农历节日、时令蔬菜和健康饮食（BMI友好）。

## ✨ 功能特点

### 1. 智能推荐
- **农历结合**：根据农历日期推荐节日美食（春节饺子、元宵节汤圆、冬至饺子等）
- **时令蔬菜**：自动推荐当季新鲜蔬菜做法
- **健康饮食**：针对BMI=34的情况，优先推荐低卡、中卡菜谱
- **双饮食模式**：
  - 中餐：每餐7个选项
  - 地中海饮食：每餐4个选项

### 2. 智能搜索
- **蔬菜搜索**：输入蔬菜名（如"黄瓜"），获取6种不同做法
- **菜名搜索**：输入菜名（如"鱼香肉丝"），获取2种不同做法
- **食材明显**：所需食材放在显著位置，方便采购
- **详细步骤**：制作步骤清晰，易于操作

### 3. 老人友好设计
- **超大字体**：所有文字都很大，看得清楚
- **大按钮**：按钮大且容易点击
- **简洁界面**：没有复杂操作，一目了然
- **响应式**：手机、平板、电脑都能用

### 4. 数据来源
- **本地数据库**：200道精选菜谱（100道中餐 + 100道地中海饮食）
- **AI扩展**：联网时可通过DeepSeek API获取更多菜谱
- **自动更新**：搜索到的新菜谱可保存到本地数据库

## 📦 系统要求

- **操作系统**：Windows 10/11, macOS, Linux
- **Python**：3.8 或更高版本
- **浏览器**：Chrome, Firefox, Safari, Edge（推荐Chrome）
- **网络**：可选（本地数据库可离线使用，AI功能需联网）

## 🚀 快速开始

### Windows 用户（推荐）

1. **双击运行**：
   ```
   双击 "启动.bat" 文件
   ```

2. **首次运行**会自动：
   - 创建虚拟环境
   - 安装所需依赖
   - 启动服务器

3. **打开浏览器访问**：
   ```
   http://localhost:5000
   ```

### macOS / Linux 用户

```bash
# 1. 进入后端目录
cd recipe-app/backend

# 2. 创建虚拟环境
python3 -m venv venv

# 3. 激活虚拟环境
source venv/bin/activate

# 4. 安装依赖
pip install -r requirements.txt

# 5. 启动服务器
python app.py
```

然后在浏览器中打开 `http://localhost:5000`

## 🔑 配置 API Key（可选）

如果想使用AI扩展功能，需要配置硅基流动API Key：

### Windows:
```batch
# 临时设置（当前命令行窗口有效）
set SILICONFLOW_API_KEY=你的新API_Key

# 永久设置
setx SILICONFLOW_API_KEY "你的新API_Key"
```

### macOS / Linux:
```bash
# 编辑 ~/.bashrc 或 ~/.zshrc
echo 'export SILICONFLOW_API_KEY=你的新API_Key' >> ~/.bashrc
source ~/.bashrc
```

**注意**：
- 你之前的API Key已暴露，请立即去[硅基流动平台](https://siliconflow.cn)撤销
- 重新生成新的API Key后再配置
- 即使不配置API Key，系统也能正常使用本地200道菜谱

## 📁 项目结构

```
recipe-app/
├── backend/                 # 后端代码
│   ├── app.py              # Flask主应用
│   ├── generate_recipes.py # 菜谱数据生成脚本
│   ├── requirements.txt    # Python依赖
│   └── data/
│       └── recipes.json    # 200道菜谱数据库
├── frontend/               # 前端代码
│   ├── index.html          # 主页面
│   └── static/
│       ├── css/
│       │   └── style.css   # 样式文件
│       └── js/
│           └── app.js      # JavaScript逻辑
├── 启动.bat                # Windows启动脚本
└── README.md              # 说明文档
```

## 🎯 使用说明

### 1. 查看今日推荐
- 打开网页后自动显示今日推荐
- 根据农历日期和季节智能推荐
- 点击菜谱卡片查看详细食材和步骤

### 2. 切换饮食模式
- 点击顶部"中餐"/"地中海饮食"按钮切换
- 中餐：每餐7个选项
- 地中海：每餐4个选项

### 3. 搜索菜谱
- 在搜索框输入蔬菜名或菜名
- 蔬菜搜索（如"黄瓜"）：显示6种做法
- 菜名搜索（如"鱼香肉丝"）：显示2种做法
- 食材列表在显著位置，方便记录采购清单

### 4. 刷新推荐
- 点击"刷新推荐"按钮获取新的随机推荐
- 保持节日和时令特色

## 🌐 部署到服务器（可选）

### 使用 Gunicorn（生产环境）

```bash
# 安装 Gunicorn
pip install gunicorn

# 启动服务（后台运行）
cd backend
gunicorn -w 4 -b 0.0.0.0:5000 app:app --daemon
```

### 使用 Nginx 反向代理

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /static {
        alias /path/to/recipe-app/frontend/static;
    }
}
```

## 📊 数据库说明

### 当前数据
- **总计**：200道菜谱
- **中餐**：100道（包含早餐、午餐、晚餐）
- **地中海**：100道（健康低脂饮食）

### 菜谱包含信息
- 菜名
- 类别（中餐/地中海）
- 适合餐次（早餐/午餐/晚餐）
- 所需食材（详细列表）
- 制作步骤（简明易懂）
- 热量等级（低/中/高）
- 适合季节
- 适合节日（部分菜谱）
- 标签（素食、高蛋白、汤类等）

### 添加新菜谱

编辑 `backend/data/recipes.json`，按以下格式添加：

```json
{
  "id": 201,
  "name": "新菜名",
  "category": "中餐",
  "meal_type": ["午餐", "晚餐"],
  "ingredients": ["食材1", "食材2"],
  "steps": ["步骤1", "步骤2"],
  "calories": "低",
  "season": "全年",
  "tags": ["标签1", "标签2"]
}
```

## ❓ 常见问题

### 1. 启动失败？
- 检查是否安装了Python 3.8+
- 确认端口5000没有被占用
- 查看错误信息，可能是依赖安装失败

### 2. 页面无法打开？
- 确认服务器已启动（看命令行是否有错误）
- 尝试 `http://127.0.0.1:5000`
- 检查防火墙是否阻止了端口5000

### 3. API功能不工作？
- 检查是否设置了正确的API Key
- 确认网络连接正常
- 本地数据库功能不受影响

### 4. 字体太小？
- 系统已针对老人优化，字体已经很大
- 可以在浏览器中按 Ctrl + 加号放大页面

## 🔧 技术栈

### 后端
- **Flask** - Web框架
- **lunar-python** - 农历库
- **requests** - HTTP请求库

### 前端
- **原生 JavaScript** - 无框架依赖
- **响应式 CSS** - 适配各种设备
- **大字体设计** - 老人友好

### AI集成
- **硅基流动API** - DeepSeek-V3模型
- **智能补充** - 本地数据不足时自动调用

## 📝 更新日志

### v1.0.0 (2026-01-12)
- ✅ 完成200道菜谱数据库
- ✅ 实现农历节日推荐
- ✅ 支持中餐/地中海双模式
- ✅ 智能搜索功能
- ✅ 老人友好界面设计
- ✅ BMI健康推荐
- ✅ AI扩展功能

## 💡 未来计划

- [ ] 添加收藏功能
- [ ] 生成每周菜单
- [ ] 自动生成采购清单
- [ ] 语音搜索功能
- [ ] 营养成分分析
- [ ] 更多菜谱数据

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 项目地址：本地项目
- 技术支持：查看代码注释

## 📄 许可证

本项目仅供个人使用。

---

**祝您和妈妈使用愉快！健康饮食，快乐生活！** 🎉
